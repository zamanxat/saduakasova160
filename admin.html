<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å | Saduakasova 160</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="shortcut icon" href="https://i.ibb.co.com/LzswhCyD/image.png" type="image/x-icon">
    <style>
        * { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
            min-height: 100vh;
        }
        
        /* Login Screen */
        .login-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .login-card {
            background: white;
            border-radius: 28px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
        }
        .login-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
        
        /* Input */
        .mobile-input {
            width: 100%;
            padding: 16px 18px;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            font-size: 20px;
            text-align: center;
            letter-spacing: 8px;
            transition: all 0.3s ease;
            outline: none;
        }
        .mobile-input:focus {
            background: white;
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59,130,246,0.15);
        }
        .mobile-input.error {
            border-color: #ef4444;
            background: #fef2f2;
        }
        
        /* Button */
        .btn-primary {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn-primary:active {
            transform: scale(0.98);
        }
        
        /* Error message */
        .error-message {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            margin-top: 16px;
            display: none;
        }
        .error-message.show {
            display: block;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        /* Stat Cards */
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 20px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        .stat-card.green { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
        .stat-card.orange { background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%); }
        .stat-card.blue { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .stat-card .stat-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0.3;
        }
        
        /* Cards */
        .admin-card {
            background: white;
            border-radius: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        
        /* Product Item */
        .product-item {
            display: flex;
            gap: 14px;
            padding: 16px;
            border-bottom: 1px solid #f3f4f6;
            cursor: pointer;
        }
        .product-item:last-child { border-bottom: none; }
        .product-item img {
            width: 72px;
            height: 72px;
            border-radius: 16px;
            object-fit: cover;
        }
        .product-info { flex: 1; min-width: 0; }
        .product-title {
            font-weight: 700;
            color: #1f2937;
            font-size: 15px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .product-price {
            color: #3b82f6;
            font-weight: 800;
            font-size: 16px;
        }
        .product-meta { display: flex; gap: 6px; margin-top: 6px; flex-wrap: wrap; }
        
        /* Bottom Nav */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e5e7eb;
            padding: 8px 16px;
            padding-bottom: max(12px, env(safe-area-inset-bottom));
            display: flex;
            justify-content: space-around;
            z-index: 50;
        }
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 10px 20px;
            border-radius: 16px;
            color: #9ca3af;
            cursor: pointer;
        }
        .nav-item.active {
            color: #3b82f6;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        }
        .nav-item svg { width: 26px; height: 26px; }
        .nav-item span { font-size: 11px; font-weight: 700; }
        
        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
            z-index: 100;
            display: flex;
            align-items: flex-end;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .modal-overlay.show { opacity: 1; visibility: visible; }
        .modal-content {
            background: white;
            border-radius: 28px 28px 0 0;
            width: 100%;
            max-height: 92vh;
            overflow-y: auto;
            padding: 20px 24px 40px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        .modal-overlay.show .modal-content { transform: translateY(0); }
        .modal-handle {
            width: 40px;
            height: 5px;
            background: #d1d5db;
            border-radius: 3px;
            margin: 0 auto 20px;
        }
        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }
        .modal-title { font-size: 22px; font-weight: 800; color: #1f2937; }
        .modal-close {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
        }
        
        /* Input Group */
        .input-group { margin-bottom: 16px; }
        .input-label {
            display: block;
            font-size: 13px;
            font-weight: 700;
            color: #374151;
            margin-bottom: 8px;
        }
        
        /* Buttons */
        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
        .btn-secondary { background: #f3f4f6; color: #374151; }
        
        /* Page Sections */
        .page-section { 
            display: none; 
            padding-bottom: 140px; 
        }
        .page-section.active { 
            display: block; 
        }
        
        /* FAB */
        .fab {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(59,130,246,0.5);
            z-index: 40;
            border: none;
            cursor: pointer;
        }
        
        /* Badges */
        .badge {
            display: inline-flex;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
        }
        .badge-success { background: #dcfce7; color: #16a34a; }
        .badge-warning { background: #fef3c7; color: #d97706; }
        .badge-info { background: #dbeafe; color: #2563eb; }
        .badge-gray { background: #f3f4f6; color: #6b7280; }
        
        /* Action Buttons */
        .action-btn {
            width: 42px;
            height: 42px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
        }
        .action-btn.delete { background: #fee2e2; color: #dc2626; }
        .action-btn.star { background: #fef3c7; color: #d97706; }
        .action-btn.star.active { background: #fbbf24; color: white; }
        
        /* Toggle */
        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
        }
        .toggle-label { font-weight: 700; color: #1f2937; }
        .toggle-desc { font-size: 12px; color: #9ca3af; margin-top: 2px; }
        .toggle-switch {
            position: relative;
            width: 56px;
            height: 32px;
            background: #e5e7eb;
            border-radius: 16px;
            cursor: pointer;
        }
        .toggle-switch.active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        .toggle-switch.active::after { left: 27px; }
        
        /* Toast */
        .toast {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(-20px);
            background: #1f2937;
            color: white;
            padding: 14px 28px;
            border-radius: 14px;
            font-weight: 700;
            z-index: 200;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        .toast.show {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }
        .toast.success { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .toast.error { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        
        /* Empty State */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 60px 20px;
            text-align: center;
        }
        .empty-state svg { width: 80px; height: 80px; color: #d1d5db; margin-bottom: 16px; }
        .empty-state p { color: #9ca3af; font-weight: 600; }
        
        /* Header */
        .admin-header {
            background: white;
            padding: 16px 20px;
            border-bottom: 1px solid #e5e7eb;
            position: sticky;
            top: 0;
            z-index: 30;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header-title { font-size: 20px; font-weight: 800; color: #1f2937; }
        .header-subtitle { font-size: 12px; color: #9ca3af; margin-top: 2px; }
        
        /* Quick Actions */
        .quick-action {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background: white;
            border-radius: 20px;
            border: none;
            cursor: pointer;
        }
        .quick-action-icon {
            width: 50px;
            height: 50px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }
        .quick-action-icon.blue { background: #dbeafe; color: #2563eb; }
        .quick-action-icon.purple { background: #ede9fe; color: #7c3aed; }
        .quick-action span { font-size: 13px; font-weight: 700; color: #374151; }
        
        /* Category Tabs */
        .category-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding: 4px;
            -webkit-overflow-scrolling: touch;
        }
        .category-tabs::-webkit-scrollbar { display: none; }
        .category-tab {
            flex-shrink: 0;
            padding: 10px 18px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            background: white;
            border: none;
            cursor: pointer;
            white-space: nowrap;
        }
        .category-tab.active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
        }
        
        /* Search Bar */
        .search-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            background: white;
            border-radius: 16px;
        }
        .search-bar input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            font-size: 16px;
        }
        
        /* Banner Item */
        .banner-item {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            aspect-ratio: 16/9;
        }
        .banner-item img { width: 100%; height: 100%; object-fit: cover; }
        .banner-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 60%);
        }
        .banner-actions {
            position: absolute;
            bottom: 16px;
            left: 16px;
            right: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
    </style>
</head>
<body>
    
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container flex items-center justify-center p-6">
        <div class="w-full max-w-sm">
            <div class="login-card p-8">
                <div class="login-icon">
                    <svg class="w-10 h-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                    </svg>
                </div>
                <h1 class="text-2xl font-black text-gray-800 text-center">Admin panel</h1>
                <p class="text-gray-500 text-center mt-2 mb-8">Saduakasova 160</p>
                
                <div class="input-group">
                    <label class="input-label">üîê –ü–∞—Ä–æ–ª—å</label>
                    <input 
                        type="tel" 
                        id="adminPassword" 
                        placeholder="‚Ä¢ ‚Ä¢ ‚Ä¢" 
                        class="mobile-input"
                        inputmode="numeric"
                        pattern="[0-9]*"
                        maxlength="10"
                        autocomplete="off"
                    >
                </div>
                
                <button id="loginBtn" class="btn-primary">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
                    </svg>
                    –í–æ–π—Ç–∏
                </button>
                
                <div id="loginError" class="error-message">
                    ‚ùå –ü–∞—Ä–æ–ª—å “õ–∞—Ç–µ
                </div>
            </div>
            
            <p class="text-center mt-6">
                <a href="index.html" class="text-white/80 font-bold">‚Üê –ö–∞—Ç–∞–ª–æ–≥“õ–∞ –æ—Ä–∞–ª—É</a>
            </p>
        </div>
    </div>
    
    <!-- Main Admin Panel -->
    <div id="adminPanel" class="hidden">
        
        <!-- Header -->
        <header class="admin-header">
            <div>
                <h1 class="header-title">Admin</h1>
                <p class="header-subtitle">Saduakasova 160</p>
            </div>
            <button id="logoutBtn" class="action-btn delete">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                </svg>
            </button>
        </header>
        
        <!-- Dashboard Section -->
        <section id="sectionDashboard" class="page-section active p-4">
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="stat-card">
                    <p class="text-white/70 text-xs font-semibold">–¢–û–í–ê–†–´</p>
                    <p id="statProducts" class="text-4xl font-black mt-2">0</p>
                    <svg class="stat-icon w-12 h-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                    </svg>
                </div>
                <div class="stat-card green">
                    <p class="text-white/70 text-xs font-semibold">–•–ò–¢–´</p>
                    <p id="statHits" class="text-4xl font-black mt-2">0</p>
                </div>
                <div class="stat-card orange">
                    <p class="text-white/70 text-xs font-semibold">–õ–ê–ô–ö–ò</p>
                    <p id="statLikes" class="text-4xl font-black mt-2">0</p>
                </div>
                <div class="stat-card blue">
                    <p class="text-white/70 text-xs font-semibold">–ë–ê–ù–ù–ï–†–´</p>
                    <p id="statBanners" class="text-4xl font-black mt-2">0</p>
                </div>
            </div>
            
            <h2 class="font-bold text-gray-800 mb-3">‚ö° –¢–µ–∑ ”ô—Ä–µ–∫–µ—Ç—Ç–µ—Ä</h2>
            <div class="grid grid-cols-2 gap-3 mb-6">
                <button class="quick-action" id="quickAddProduct">
                    <div class="quick-action-icon blue">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                        </svg>
                    </div>
                    <span>–¢–æ–≤–∞—Ä “õ–æ—Å—É</span>
                </button>
                <button class="quick-action" id="quickAddBanner">
                    <div class="quick-action-icon purple">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <span>–ë–∞–Ω–Ω–µ—Ä “õ–æ—Å—É</span>
                </button>
            </div>
            
            <div class="admin-card" style=" margin-bottom: 100px;">
                <div class="flex items-center justify-between p-4 border-b border-gray-100">
                    <h2 class="font-bold text-gray-800">üì¶ –°–æ“£“ì—ã —Ç–æ–≤–∞—Ä–ª–∞—Ä</h2>
                    <button class="text-blue-500 text-sm font-bold" id="viewAllProducts">–ë–∞—Ä–ª—ã“ì—ã ‚Üí</button>
                </div>
                <div id="recentProducts"></div>
            </div>
        </section>
        
        <!-- Products Section -->
        <section id="sectionProducts" class="page-section p-4">
            <div class="search-bar mb-4">
                <svg class="w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
                <input type="text" id="productSearch" placeholder="–¢–æ–≤–∞—Ä —ñ–∑–¥–µ—É...">
            </div>
            
            <div class="category-tabs mb-4">
                <button class="category-tab active" data-category="all">–ë–∞—Ä–ª—ã“ì—ã</button>
                <button class="category-tab" data-category="–ù–∞–ø–∏—Ç–∫–∏">ü•§ –°—É—Å—ã–Ω–¥–∞—Ä</button>
                <button class="category-tab" data-category="–°–ª–∞–¥–æ—Å—Ç–∏">üç´ –¢”ô—Ç—Ç—ñ–ª–µ—Ä</button>
                <button class="category-tab" data-category="–ï–¥–∞">üçî –¢–∞–º–∞“õ</button>
                <button class="category-tab" data-category="–î—Ä—É–≥–æ–µ">üì¶ –ë–∞—Å“õ–∞</button>
            </div>
            
            <div id="productsList" class="admin-card" style="margin-bottom: 100px;"></div>
        </section>
        
        <!-- Banners Section -->
        <section id="sectionBanners" class="page-section p-4" style="padding-bottom: 140px;">
            <div class="flex items-center justify-between mb-4">
                <h2 class="font-bold text-gray-800 text-lg">üñº –ë–∞–Ω–Ω–µ—Ä–ª–µ—Ä</h2>
                <button class="btn btn-primary" style="width: auto; padding: 12px 20px; font-size: 14px; background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; border: none; border-radius: 12px; font-weight: 700; cursor: pointer;" id="addBannerBtn">
                    + “ö–æ—Å—É
                </button>
            </div>
            <div id="bannersList" class="grid gap-4" style="padding-bottom: 20px;"></div>
        </section>
        
        <!-- FAB -->
        <button id="fabBtn" class="fab">
            <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12 4v16m8-8H4"/>
            </svg>
        </button>
        
        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-section="dashboard">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                </svg>
                <span>–ë–∞—Å—Ç—ã</span>
            </button>
            <button class="nav-item" data-section="products">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                </svg>
                <span>–¢–æ–≤–∞—Ä–ª–∞—Ä</span>
            </button>
            <button class="nav-item" data-section="banners">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                <span>–ë–∞–Ω–Ω–µ—Ä–ª–µ—Ä</span>
            </button>
        </nav>
    </div>
    
    <!-- Product Modal -->
    <div id="productModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-handle"></div>
            <div class="modal-header">
                <h2 id="productModalTitle" class="modal-title">–¢–æ–≤–∞—Ä “õ–æ—Å—É</h2>
                <button class="modal-close" id="closeProductModal">
                    <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            
            <div class="input-group">
                <label class="input-label">üì∑ –§–æ—Ç–æ (URL)</label>
                <input type="url" id="pImage" placeholder="https://..." class="mobile-input" style="text-align: left; letter-spacing: normal;">
            </div>
            
            <div id="imagePreview" class="mb-4 hidden">
                <img class="w-full h-40 object-cover rounded-2xl">
            </div>
            
            <div class="input-group">
                <label class="input-label">üìù –ê—Ç–∞—É—ã</label>
                <input type="text" id="pTitle" placeholder="–¢–æ–≤–∞—Ä –∞—Ç–∞—É—ã" class="mobile-input" style="text-align: left; letter-spacing: normal;">
            </div>
            
            <div class="grid grid-cols-2 gap-3">
                <div class="input-group">
                    <label class="input-label">üí∞ –ë–∞“ì–∞—Å—ã (‚Ç∏)</label>
                    <input type="number" id="pPrice" placeholder="500" class="mobile-input" inputmode="numeric" style="text-align: left; letter-spacing: normal;">
                </div>
                <div class="input-group">
                    <label class="input-label">üö™ –ë”©–ª–º–µ</label>
                    <input type="text" id="pRoom" placeholder="101" class="mobile-input" inputmode="numeric" style="text-align: left; letter-spacing: normal;">
                </div>
            </div>
            
            <div class="input-group">
                <label class="input-label">üìÇ –°–∞–Ω–∞—Ç</label>
                <select id="pCategory" class="mobile-input" style="text-align: left; letter-spacing: normal;">
                    <option value="">–°–∞–Ω–∞—Ç—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑</option>
                    <option value="–ù–∞–ø–∏—Ç–∫–∏">ü•§ –°—É—Å—ã–Ω–¥–∞—Ä</option>
                    <option value="–°–ª–∞–¥–æ—Å—Ç–∏">üç´ –¢”ô—Ç—Ç—ñ–ª–µ—Ä</option>
                    <option value="–ï–¥–∞">üçî –¢–∞–º–∞“õ</option>
                    <option value="–í—ã–ø–µ—á–∫–∞">ü•ê –ü—ñ—Å—ñ—Ä—ñ–ª–≥–µ–Ω–¥–µ—Ä</option>
                    <option value="–ó–∞–∫—É—Å–∫–∏">üçø –°–Ω–µ–∫—Ç–µ—Ä</option>
                    <option value="–§–∞—Å—Ç-—Ñ—É–¥">üçü –§–∞—Å—Ç-—Ñ—É–¥</option>
                    <option value="–ú–æ–ª–æ—á–Ω—ã–µ">ü•õ –°“Ø—Ç ”©–Ω—ñ–º–¥–µ—Ä—ñ</option>
                    <option value="–§—Ä—É–∫—Ç—ã">üçé –ñ–µ–º—ñ—Å—Ç–µ—Ä</option>
                    <option value="–ì–∏–≥–∏–µ–Ω–∞">üß¥ –ì–∏–≥–∏–µ–Ω–∞</option>
                    <option value="–ö–∞–Ω—Ü–µ–ª—è—Ä–∏—è">‚úèÔ∏è –ö–µ“£—Å–µ</option>
                    <option value="–ê—Ä–µ–Ω–¥–∞">üì¶ –ñ–∞–ª“ì–∞ –±–µ—Ä—É</option>
                    <option value="–£—Å–ª—É–≥–∞">üîß “ö—ã–∑–º–µ—Ç</option>
                    <option value="–î—Ä—É–≥–æ–µ">üì¶ –ë–∞—Å“õ–∞</option>
                </select>
            </div>
            
            <div class="input-group">
                <label class="input-label">üìÑ –°–∏–ø–∞—Ç—Ç–∞–º–∞</label>
                <textarea id="pDescription" placeholder="–¢–æ–≤–∞—Ä —Å–∏–ø–∞—Ç—Ç–∞–º–∞—Å—ã..." rows="3" class="mobile-input" style="resize: none; text-align: left; letter-spacing: normal;"></textarea>
            </div>
            
            <div class="input-group">
                <label class="input-label">üìû –¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input type="tel" id="pPhone" placeholder="+7 7xx xxx xxxx" class="mobile-input" style="text-align: left; letter-spacing: normal;">
            </div>
            
            <div class="input-group">
                <label class="input-label">üí¨ WhatsApp</label>
                <input type="tel" id="pWhatsapp" placeholder="+7 7xx xxx xxxx" class="mobile-input" style="text-align: left; letter-spacing: normal;">
            </div>
            
            <div class="toggle-container">
                <div>
                    <p class="toggle-label">‚≠ê –•–∏—Ç</p>
                    <p class="toggle-desc">–•–∏—Ç—Ç–µ—Ä –±”©–ª—ñ–º—ñ–Ω–¥–µ –∫”©—Ä—Å–µ—Ç—É</p>
                </div>
                <div id="pHitToggle" class="toggle-switch"></div>
            </div>
            
            <input type="hidden" id="pId">
            
            <div class="space-y-3 mt-6">
                <button id="saveProductBtn" class="btn btn-success">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    –°–∞“õ—Ç–∞—É
                </button>
                <button id="deleteProductBtn" class="btn btn-danger hidden">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                    –ñ–æ—é
                </button>
            </div>
        </div>
    </div>
    
    <!-- Banner Modal -->
    <div id="bannerModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-handle"></div>
            <div class="modal-header">
                <h2 class="modal-title">–ë–∞–Ω–Ω–µ—Ä “õ–æ—Å—É</h2>
                <button class="modal-close" id="closeBannerModal">
                    <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            
            <div class="input-group">
                <label class="input-label">üîó URL</label>
                <input type="url" id="bUrl" placeholder="https://..." class="mobile-input" style="text-align: left; letter-spacing: normal;">
            </div>
            
            <div class="input-group">
                <label class="input-label">üìÅ –¢“Ø—Ä—ñ</label>
                <select id="bType" class="mobile-input" style="text-align: left; letter-spacing: normal;">
                    <option value="image">üñº –°—É—Ä–µ—Ç</option>
                    <option value="video">üé• –í–∏–¥–µ–æ</option>
                </select>
            </div>
            
            <div class="input-group">
                <label class="input-label">üî¢ –†–µ—Ç—ñ</label>
                <input type="number" id="bOrder" placeholder="1" class="mobile-input" inputmode="numeric" style="text-align: left; letter-spacing: normal;">
            </div>
            
            <button id="saveBannerBtn" class="btn btn-success mt-4">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
                –°–∞“õ—Ç–∞—É
            </button>
        </div>
    </div>
    
    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <script>
        // ===== CONFIG =====
        var ADMIN_PASS = '123';
        var SB_URL = 'https://cgdeytbwaeuokxpjmybf.supabase.co';
        var SB_KEY = 'sb_publishable_6gTEhAHmv2YyiGBsq6i78w_YpTbxuNS';
        
        var client;
        var allProducts = [];
        var allBanners = [];
        var currentCategory = 'all';
        
        // ===== INIT =====
        document.addEventListener('DOMContentLoaded', function() {
            client = supabase.createClient(SB_URL, SB_KEY);
            
            if (localStorage.getItem('admin_logged') === 'true') {
                showAdminPanel();
            }
            
            // Login
            document.getElementById('loginBtn').onclick = login;
            document.getElementById('adminPassword').onkeypress = function(e) {
                if (e.key === 'Enter') login();
            };
            
            // Clear error on input
            document.getElementById('adminPassword').oninput = function() {
                this.classList.remove('error');
                document.getElementById('loginError').classList.remove('show');
            };
            
            // Logout
            document.getElementById('logoutBtn').onclick = logout;
            
            // Navigation
            var navItems = document.querySelectorAll('.nav-item');
            for (var i = 0; i < navItems.length; i++) {
                navItems[i].onclick = function() {
                    switchSection(this.getAttribute('data-section'));
                };
            }
            
            // Category tabs
            var categoryTabs = document.querySelectorAll('.category-tab');
            for (var i = 0; i < categoryTabs.length; i++) {
                categoryTabs[i].onclick = function() {
                    currentCategory = this.getAttribute('data-category');
                    for (var j = 0; j < categoryTabs.length; j++) {
                        categoryTabs[j].classList.remove('active');
                    }
                    this.classList.add('active');
                    renderProducts();
                };
            }
            
            // FAB & Quick Actions
            document.getElementById('fabBtn').onclick = openAddProductModal;
            document.getElementById('quickAddProduct').onclick = openAddProductModal;
            document.getElementById('quickAddBanner').onclick = openBannerModal;
            document.getElementById('viewAllProducts').onclick = function() {
                switchSection('products');
            };
            
            // Product Modal
            document.getElementById('closeProductModal').onclick = closeProductModal;
            document.getElementById('saveProductBtn').onclick = saveProduct;
            document.getElementById('deleteProductBtn').onclick = deleteProduct;
            document.getElementById('pHitToggle').onclick = function() {
                this.classList.toggle('active');
            };
            document.getElementById('pImage').oninput = function() {
                var preview = document.getElementById('imagePreview');
                if (this.value) {
                    preview.classList.remove('hidden');
                    preview.querySelector('img').src = this.value;
                } else {
                    preview.classList.add('hidden');
                }
            };
            
            // Banner Modal
            document.getElementById('addBannerBtn').onclick = openBannerModal;
            document.getElementById('closeBannerModal').onclick = closeBannerModal;
            document.getElementById('saveBannerBtn').onclick = saveBanner;
            
            // Search
            document.getElementById('productSearch').oninput = renderProducts;
            
            // Close modal on overlay click
            document.getElementById('productModal').onclick = function(e) {
                if (e.target === this) closeProductModal();
            };
            document.getElementById('bannerModal').onclick = function(e) {
                if (e.target === this) closeBannerModal();
            };
        });
        
        // ===== LOGIN =====
        function login() {
            var passwordInput = document.getElementById('adminPassword');
            var password = passwordInput.value;
            var errorDiv = document.getElementById('loginError');
            
            if (password === ADMIN_PASS) {
                localStorage.setItem('admin_logged', 'true');
                showAdminPanel();
            } else {
                passwordInput.classList.add('error');
                errorDiv.classList.add('show');
                passwordInput.value = '';
            }
        }
        
        function logout() {
            localStorage.removeItem('admin_logged');
            window.location.reload();
        }
        
        function showAdminPanel() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('adminPanel').classList.remove('hidden');
            loadData();
        }
        
        // ===== LOAD DATA =====
        function loadData() {
            client.from('products').select('*').order('created_at', { ascending: false })
                .then(function(response) {
                    if (response.data) {
                        allProducts = response.data;
                        updateStats();
                        renderRecentProducts();
                        renderProducts();
                    }
                });
            
            client.from('banners').select('*').order('sort_order')
                .then(function(response) {
                    if (response.data) {
                        allBanners = response.data;
                        updateStats();
                        renderBanners();
                    }
                });
        }
        
        function updateStats() {
            document.getElementById('statProducts').textContent = allProducts.length;
            
            var hits = 0;
            var likes = 0;
            for (var i = 0; i < allProducts.length; i++) {
                if (allProducts[i].is_hit) hits++;
                likes += (allProducts[i].likes || 0);
            }
            
            document.getElementById('statHits').textContent = hits;
            document.getElementById('statLikes').textContent = likes;
            document.getElementById('statBanners').textContent = allBanners.length;
        }
        
        // ===== RENDER =====
        function renderRecentProducts() {
            var container = document.getElementById('recentProducts');
            var recent = allProducts.slice(0, 5);
            
            if (recent.length === 0) {
                container.innerHTML = '<div class="empty-state"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg><p>–¢–æ–≤–∞—Ä–ª–∞—Ä –∂–æ“õ</p></div>';
                return;
            }
            
            var html = '';
            for (var i = 0; i < recent.length; i++) {
                var p = recent[i];
                html += '<div class="product-item" onclick="openEditProductModal(' + p.id + ')">';
                html += '<img src="' + (p.image_url || 'https://via.placeholder.com/72') + '" alt="">';
                html += '<div class="product-info">';
                html += '<p class="product-title">' + p.title + '</p>';
                html += '<p class="product-price">' + p.price + ' ‚Ç∏</p>';
                html += '<div class="product-meta">';
                html += '<span class="badge badge-info">' + (p.category || '–ë–∞—Å“õ–∞') + '</span>';
                if (p.is_hit) html += '<span class="badge badge-warning">‚≠ê –•–∏—Ç</span>';
                html += '</div></div></div>';
            }
            container.innerHTML = html;
        }
        
        function renderProducts() {
            var container = document.getElementById('productsList');
            var search = document.getElementById('productSearch').value.toLowerCase();
            
            var filtered = [];
            for (var i = 0; i < allProducts.length; i++) {
                var p = allProducts[i];
                var matchSearch = p.title.toLowerCase().indexOf(search) !== -1;
                var matchCategory = currentCategory === 'all' || p.category === currentCategory;
                if (matchSearch && matchCategory) filtered.push(p);
            }
            
            if (filtered.length === 0) {
                container.innerHTML = '<div class="empty-state"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg><p>–ï—à—Ç–µ“£–µ —Ç–∞–±—ã–ª–º–∞–¥—ã</p></div>';
                return;
            }
            
            var html = '';
            for (var i = 0; i < filtered.length; i++) {
                var p = filtered[i];
                var isHit = p.is_hit ? true : false;
                html += '<div class="product-item">';
                html += '<img src="' + (p.image_url || 'https://via.placeholder.com/72') + '" alt="" onclick="openEditProductModal(' + p.id + ')">';
                html += '<div class="product-info" onclick="openEditProductModal(' + p.id + ')">';
                html += '<p class="product-title">' + p.title + '</p>';
                html += '<p class="product-price">' + p.price + ' ‚Ç∏</p>';
                html += '<div class="product-meta">';
                html += '<span class="badge badge-info">' + (p.category || '–ë–∞—Å“õ–∞') + '</span>';
                html += '<span class="badge badge-gray">üö™ ' + (p.room_number || '-') + '</span>';
                if (isHit) html += '<span class="badge badge-warning">‚≠ê</span>';
                html += '</div></div>';
                html += '<div style="display: flex; flex-direction: column; gap: 8px;">';
                html += '<button class="action-btn star ' + (isHit ? 'active' : '') + '" onclick="toggleHit(' + p.id + ', ' + isHit + ')">';
                html += '<svg class="w-5 h-5" fill="' + (isHit ? 'currentColor' : 'none') + '" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>';
                html += '</button>';
                html += '<button class="action-btn delete" onclick="quickDeleteProduct(' + p.id + ')">';
                html += '<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>';
                html += '</button></div></div>';
            }
            container.innerHTML = html;
        }
        
        function renderBanners() {
            var container = document.getElementById('bannersList');
            
            if (allBanners.length === 0) {
                container.innerHTML = '<div class="admin-card empty-state"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg><p>–ë–∞–Ω–Ω–µ—Ä–ª–µ—Ä –∂–æ“õ</p></div>';
                return;
            }
            
            var html = '';
            for (var i = 0; i < allBanners.length; i++) {
                var b = allBanners[i];
                var isActive = b.is_active ? true : false;
                html += '<div class="banner-item">';
                if (b.type === 'video') {
                    html += '<video src="' + b.url + '" muted loop autoplay playsinline style="width:100%;height:100%;object-fit:cover;"></video>';
                } else {
                    html += '<img src="' + b.url + '" alt="">';
                }
                html += '<div class="banner-overlay"></div>';
                html += '<div class="banner-actions">';
                html += '<span class="badge ' + (isActive ? 'badge-success' : 'badge-warning') + '">' + (isActive ? '‚úì –ë–µ–ª—Å–µ–Ω–¥—ñ' : '‚úó –ñ–∞—Å—ã—Ä—ã–Ω') + '</span>';
                html += '<span class="badge badge-gray">#' + (b.sort_order || 1) + '</span>';
                html += '<div style="flex: 1;"></div>';
                html += '<button class="action-btn" style="background: rgba(255,255,255,0.9);" onclick="toggleBannerActive(' + b.id + ', ' + isActive + ')">';
                html += '<svg class="w-5 h-5" style="color: #374151;" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>';
                html += '</button>';
                html += '<button class="action-btn delete" onclick="deleteBanner(' + b.id + ')">';
                html += '<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>';
                html += '</button></div></div>';
            }
            container.innerHTML = html;
        }
        
        // ===== SECTIONS =====
        function switchSection(section) {
            var sections = document.querySelectorAll('.page-section');
            for (var i = 0; i < sections.length; i++) {
                sections[i].classList.remove('active');
            }
            document.getElementById('section' + section.charAt(0).toUpperCase() + section.slice(1)).classList.add('active');
            
            var navItems = document.querySelectorAll('.nav-item');
            for (var i = 0; i < navItems.length; i++) {
                navItems[i].classList.remove('active');
                if (navItems[i].getAttribute('data-section') === section) {
                    navItems[i].classList.add('active');
                }
            }
            
            var fab = document.getElementById('fabBtn');
            fab.style.display = section === 'banners' ? 'none' : 'flex';
        }
        
        // ===== PRODUCT MODAL =====
        function openAddProductModal() {
            document.getElementById('productModalTitle').textContent = '–¢–æ–≤–∞—Ä “õ–æ—Å—É';
            document.getElementById('pId').value = '';
            document.getElementById('pImage').value = '';
            document.getElementById('pTitle').value = '';
            document.getElementById('pPrice').value = '';
            document.getElementById('pRoom').value = '';
            document.getElementById('pCategory').value = '';
            document.getElementById('pDescription').value = '';
            document.getElementById('pPhone').value = '';
            document.getElementById('pWhatsapp').value = '';
            document.getElementById('pHitToggle').classList.remove('active');
            document.getElementById('imagePreview').classList.add('hidden');
            document.getElementById('deleteProductBtn').classList.add('hidden');
            document.getElementById('productModal').classList.add('show');
        }
        
        function openEditProductModal(id) {
            var p = null;
            for (var i = 0; i < allProducts.length; i++) {
                if (allProducts[i].id === id) {
                    p = allProducts[i];
                    break;
                }
            }
            if (!p) return;
            
            document.getElementById('productModalTitle').textContent = '”®“£–¥–µ—É';
            document.getElementById('pId').value = p.id;
            document.getElementById('pImage').value = p.image_url || '';
            document.getElementById('pTitle').value = p.title || '';
            document.getElementById('pPrice').value = p.price || '';
            document.getElementById('pRoom').value = p.room_number || '';
            document.getElementById('pCategory').value = p.category || '';
            document.getElementById('pDescription').value = p.description || '';
            document.getElementById('pPhone').value = p.phone || '';
            document.getElementById('pWhatsapp').value = p.whatsapp || '';
            
            if (p.is_hit) {
                document.getElementById('pHitToggle').classList.add('active');
            } else {
                document.getElementById('pHitToggle').classList.remove('active');
            }
            
            if (p.image_url) {
                document.getElementById('imagePreview').classList.remove('hidden');
                document.getElementById('imagePreview').querySelector('img').src = p.image_url;
            } else {
                document.getElementById('imagePreview').classList.add('hidden');
            }
            
            document.getElementById('deleteProductBtn').classList.remove('hidden');
            document.getElementById('productModal').classList.add('show');
        }
        
        function closeProductModal() {
            document.getElementById('productModal').classList.remove('show');
        }
        
        function saveProduct() {
            var id = document.getElementById('pId').value;
            var data = {
                image_url: document.getElementById('pImage').value,
                title: document.getElementById('pTitle').value,
                price: parseInt(document.getElementById('pPrice').value) || 0,
                room_number: document.getElementById('pRoom').value,
                category: document.getElementById('pCategory').value,
                description: document.getElementById('pDescription').value,
                phone: document.getElementById('pPhone').value,
                whatsapp: document.getElementById('pWhatsapp').value,
                is_hit: document.getElementById('pHitToggle').classList.contains('active'),
                images: [document.getElementById('pImage').value]
            };
            
            if (!data.title || !data.price) {
                showToast('–ê—Ç–∞—É—ã –º–µ–Ω –±–∞“ì–∞—Å—ã–Ω —Ç–æ–ª—Ç—ã—Ä—ã“£—ã–∑!', 'error');
                return;
            }
            
            if (id) {
                client.from('products').update(data).eq('id', id)
                    .then(function() {
                        showToast('‚úì –°–∞“õ—Ç–∞–ª–¥—ã!', 'success');
                        closeProductModal();
                        loadData();
                    });
            } else {
                data.owner_code = Math.floor(10000 + Math.random() * 90000).toString();
                client.from('products').insert([data])
                    .then(function() {
                        showToast('‚úì “ö–æ—Å—ã–ª–¥—ã!', 'success');
                        closeProductModal();
                        loadData();
                    });
            }
        }
        
        function deleteProduct() {
            var id = document.getElementById('pId').value;
            if (!id) return;
            if (!confirm('–ë“±–ª —Ç–æ–≤–∞—Ä–¥—ã –∂–æ—é –∫–µ—Ä–µ–∫ –ø–µ?'))
                return;
            client.from('products').delete().eq('id', id)
                .then(function() {
                    showToast('‚úì –ñ–æ—é!', 'success');
                    closeProductModal();
                    loadData();
                });
        }
        
        function quickDeleteProduct(id) {
            if (!confirm('–ë“±–ª —Ç–æ–≤–∞—Ä–¥—ã –∂–æ—é –∫–µ—Ä–µ–∫ –ø–µ?')) return;
            
            client.from('products').delete().eq('id', id)
                .then(function() {
                    showToast('‚úì –ñ–æ–π—ã–ª–¥—ã!', 'success');
                    loadData();
                });
        }
        
        function toggleHit(id, currentHit) {
            client.from('products').update({ is_hit: !currentHit }).eq('id', id)
                .then(function() {
                    showToast(currentHit ? '–•–∏—Ç—Ç–µ–Ω –∞–ª—ã–Ω–¥—ã' : '‚≠ê –•–∏—Ç–∫–µ “õ–æ—Å—ã–ª–¥—ã', 'success');
                    loadData();
                });
        }
        
        // ===== BANNER MODAL =====
        function openBannerModal() {
            document.getElementById('bUrl').value = '';
            document.getElementById('bType').value = 'image';
            document.getElementById('bOrder').value = allBanners.length + 1;
            document.getElementById('bannerModal').classList.add('show');
        }
        
        function closeBannerModal() {
            document.getElementById('bannerModal').classList.remove('show');
        }
        
        function saveBanner() {
            var data = {
                url: document.getElementById('bUrl').value,
                type: document.getElementById('bType').value,
                sort_order: parseInt(document.getElementById('bOrder').value) || 1,
                is_active: true
            };
            
            if (!data.url) {
                showToast('URL –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑!', 'error');
                return;
            }
            
            client.from('banners').insert([data])
                .then(function() {
                    showToast('‚úì –ë–∞–Ω–Ω–µ—Ä “õ–æ—Å—ã–ª–¥—ã!', 'success');
                    closeBannerModal();
                    loadData();
                });
        }
        
        function toggleBannerActive(id, currentActive) {
            client.from('banners').update({ is_active: !currentActive }).eq('id', id)
                .then(function() {
                    showToast(currentActive ? '–ë–∞–Ω–Ω–µ—Ä –∂–∞—Å—ã—Ä—ã–ª–¥—ã' : '‚úì –ë–∞–Ω–Ω–µ—Ä –±–µ–ª—Å–µ–Ω–¥—ñ—Ä—ñ–ª–¥—ñ', 'success');
                    loadData();
                });
        }
        
        function deleteBanner(id) {
            if (!confirm('–ë“±–ª –±–∞–Ω–Ω–µ—Ä–¥—ñ –∂–æ—é –∫–µ—Ä–µ–∫ –ø–µ?')) return;
            
            client.from('banners').delete().eq('id', id)
                .then(function() {
                    showToast('‚úì –ë–∞–Ω–Ω–µ—Ä –∂–æ–π—ã–ª–¥—ã!', 'success');
                    loadData();
                });
        }
        
        // ===== TOAST =====
        function showToast(message, type) {
            var toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast show ' + (type || '');
            
            setTimeout(function() {
                toast.classList.remove('show');
            }, 2500);
        }
    </script>
</body>
</html>
